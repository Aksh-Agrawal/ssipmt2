# <!-- Powered by BMADâ„¢ Core -->
# Story 3.2: Agent UI Shell (Map & Chat)

## Status
In Progress

## Story
**As a** user,
**I want** to see a screen with a map and a chat input field,
**so that** I have an interface to interact with the agent.

## Acceptance Criteria
1. A new `AgentChatScreen` is implemented in the mobile app.
2. The screen displays an interactive map as a primary UI element.
3. The screen contains a text input field and a "Send" button for submitting queries to the agent.
4. The screen has an area to display a list of chat messages.

## Tasks / Subtasks
- [ ] Flesh out the `AgentChatScreen.tsx` component in the `apps/mobile` package. (AC: #1)
- [ ] Integrate a map component library (e.g., `react-native-maps` or a Google Maps equivalent) and configure it to display a default view (e.g., centered on the city). (AC: #2)
- [ ] Add a `TextInput` and a "Send" `IconButton` from `react-native-paper`, likely positioned at the bottom of the screen. (AC: #3)
- [ ] Add a `ScrollView` or `FlatList` to the screen, which will be used to render the chat history. (AC: #4)
- [ ] Implement local state management (`useState`) for the screen to handle the current input text and an array of chat messages. (AC: #3, #4)
- [ ] When the "Send" button is pressed, a new message object should be added to the chat messages array and the input field should be cleared.

## Dev Notes
This story builds the user-facing side of the AI agent. The focus is on creating the shell and the basic UI components; the actual API calls to the agent will be handled in subsequent stories.

- **UI Layout:** A common and effective layout is a map view occupying the top portion of the screen with a chat interface as a draggable bottom sheet or a fixed view on the bottom half.
- **Map Library:** `react-native-maps` is a standard choice for a flexible map implementation in React Native.
- **Chat Bubbles:** The chat history list should be prepared to render messages with different styles based on whether the author is the `user` or the `agent`.
- **State:** For now, the chat history will just be stored in local component state. It will not persist.

### Testing
- **Component Test:** Write a unit test for `AgentChatScreen.tsx` to assert that the map view, text input, and send button are rendered on the screen.
- **Integration Test:** Write a test to simulate a user typing a message into the `TextInput` and pressing the "Send" button. Verify that the `TextInput` is cleared and that a new message object with the correct text and author (`user`) is added to the component's state for the chat history.

## Change Log
| Date | Version | Description | Author |
| :--- | :--- | :--- | :--- |
| 2025-10-18 | 1.0 | Initial draft of the story. | Sarah (PO) |
