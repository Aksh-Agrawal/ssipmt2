# Story 9.3: Multilingual Text-to-Speech with Criteria TTS & Swaram AI

**User Story:**
As a user,
I want to receive spoken responses from the AI agent in my preferred language,
So that the interaction feels natural and accessible.

**Story Context:**
*   **Integrates with:** The `agent-service`'s response generation logic and the PipeCat audio stream.
*   **Technology:** Criteria TTS, Swaram AI, and the existing PipeCat integration.
*   **Follows pattern:** The existing microservices architecture and the event-driven nature of the PipeCat pipeline.
*   **Touch points:** This story adds new processors to the `agent-service`'s PipeCat pipeline to handle TTS and language-specific voice synthesis.

**Acceptance Criteria:**
1.  The `agent-service`'s response text is passed to Criteria TTS for synthesis.
2.  Swaram AI is used to determine the appropriate language and voice for the TTS output, based on the user's input language or a stored preference.
3.  Criteria TTS generates natural-sounding speech in the detected/preferred language.
4.  The generated audio is streamed back to the mobile application via PipeCat.
5.  The system correctly synthesizes speech in all supported languages (English, Hindi, Chhattisgarhi).
6.  The integration is covered by appropriate tests.
7.  No regression in existing functionality is verified.

**Technical Notes:**
*   **Integration Approach:** Add Criteria TTS and Swaram AI processors to the PipeCat pipeline within the `agent-service` for the outgoing audio stream. Swaram AI will inform Criteria TTS about the target language and voice.
*   **Existing Pattern Reference:** This builds directly on the PipeCat pipeline pattern established in the previous stories.
*   **Key Constraints:** The latency of TTS generation and audio streaming should be low enough to maintain a natural conversational flow. API keys for Criteria TTS and Swaram AI must be managed securely.

**Minimal Risk Assessment:**

*   **Primary Risk:** The naturalness and quality of the synthesized speech from Criteria TTS, especially across multiple languages and accents, and ensuring it aligns with user expectations.
*   **Mitigation:** Conduct extensive user testing with native speakers for each supported language to gather feedback on TTS quality. Provide options for different voices or speaking styles if available.
*   **Rollback:** The TTS component can be disabled within the PipeCat pipeline, allowing the system to revert to text-only responses if critical issues are found with the speech synthesis.

**Compatibility Verification:**

*   [x] No breaking changes to existing APIs.
*   [x] Database changes (if any) are additive only. (No DB changes expected for this story).
*   [x] UI changes follow existing design patterns. (No direct UI changes for this story, as it's audio output).
*   [x] Performance impact is negligible.
