# <!-- Powered by BMADâ„¢ Core -->
# Story 2.1: Admin Dashboard UI Shell & Auth

## Status
Draft

## Story
**As an** admin,
**I want** a basic web application with a secure login,
**so that** I have a protected place to view and manage reports.

## Acceptance Criteria
1. A new Next.js application is created for the admin dashboard at `apps/admin-web`.
2. A login page is created that allows a user to authenticate using an email and password.
3. Authentication is handled by Supabase Auth.
4. After successful login, the user is redirected to a protected dashboard page.
5. Unauthorized users attempting to access the dashboard page are redirected to the login page.

## Tasks / Subtasks
- [ ] Bootstrap a new Next.js application within the `apps/admin-web` directory of the monorepo. (AC: #1)
- [ ] Create a login screen component (`/src/app/login/page.tsx`) with email and password fields and a login button. (AC: #2)
- [ ] Integrate the Supabase Auth client for Next.js (e.g., `@supabase/auth-helpers-nextjs`). (AC: #3)
- [ ] Implement the client-side logic to call Supabase's `signInWithPassword` method when the login form is submitted. (AC: #3)
- [ ] Create a protected placeholder page for the dashboard (e.g., `/src/app/dashboard/page.tsx`). (AC: #4)
- [ ] Implement route protection using Next.js middleware or server-side components to verify the user's auth session. (AC: #5)
- [ ] On successful login, redirect the user to the `/dashboard` route. (AC: #4)

## Dev Notes
This story sets up the foundation for the entire web-based admin portal. Security and proper session management are critical.

- **Framework:** Next.js (as per `docs/architecture/6-components.md`).
- **Authentication Provider:** Supabase Auth is the designated provider. Use the official `@supabase/auth-helpers-nextjs` library to handle server-side rendering (SSR) and route protection correctly.
- **Auth Flow:** The authentication flow is detailed in `docs/architecture/11-backend-architecture.md`. The frontend client will interact directly with the Supabase Auth service.
- **UI Components:** While no specific UI library is mandated for the web app, a library like Material-UI (MUI) would be a good choice for consistency with the Material Design principles of the mobile app.

### Testing
- **Unit Test:** Test the `LoginPage` component to ensure it renders correctly and handles user input.
- **Integration Test:** Mock the Supabase client. Test the login form submission to verify it calls the `signInWithPassword` function with the correct credentials. Test the route protection middleware/logic to ensure it correctly redirects unauthenticated users.

## Change Log
| Date | Version | Description | Author |
| :--- | :--- | :--- | :--- |
| 2025-10-18 | 1.0 | Initial draft of the story. | Sarah (PO) |
