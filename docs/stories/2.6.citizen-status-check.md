# <!-- Powered by BMADâ„¢ Core -->
# Story 2.6: Citizen Status Check

## Status
Draft

## Story
**As a** citizen,
**I want** to use my tracking ID to see the current status of my report,
**so that** I know if it's being addressed.

## Acceptance Criteria
1. A new public-facing API endpoint is created to fetch the status of a report by its ID.
2. The endpoint only returns non-sensitive data (e.g., `id`, `status`, `updatedAt`).
3. The mobile app has a feature (e.g., a new screen or modal) allowing a user to enter a tracking ID.
4. The app calls the public endpoint with the ID and displays the returned status to the user.

## Tasks / Subtasks

### Backend
- [ ] Create a new **public** API endpoint: `GET /api/v1/reports/[id]`. (AC: #1)
- [ ] Implement a repository function to fetch a report by its ID, but only select the public-safe columns (`id`, `status`, `updated_at`). (AC: #2)
- [ ] Ensure this endpoint has NO authentication middleware applied. (AC: #1)
- [ ] The endpoint should return a `404 Not Found` if the ID does not exist. (AC: #4)

### Frontend (Mobile App)
- [ ] Add a "Check Status" button or link to the `HomeScreen`. (AC: #3)
- [ ] Create a new screen or modal (`StatusCheckScreen.tsx`) with a text input for the tracking ID and a "Check" button. (AC: #3)
- [ ] Add a new function to the `reportService` to call the public `GET /api/v1/reports/[id]` endpoint. (AC: #4)
- [ ] When the user submits an ID, call the service and display the returned status and last updated time. (AC: #4)
- [ ] Handle and display errors, such as when a tracking ID is not found. (AC: #4)

## Dev Notes
This story closes the feedback loop for the citizen. The most critical aspect is ensuring the public API endpoint does not expose any private or sensitive information.

- **Security & Privacy:** The public `GET /api/v1/reports/[id]` endpoint is distinct from the admin-only `GET /api/v1/admin/reports/[id]` endpoint. It is imperative that the public endpoint **only** returns fields that are safe for public consumption. Returning location data, photos, or full descriptions would be a security failure.
- **Data to Expose:** The only fields returned by this endpoint should be `id`, `status`, and `updatedAt`.
- **UI/UX:** The user interface for checking a status should be simple and easy to find from the home screen. The result should be presented clearly and unambiguously.

### Testing
- **Backend Integration Test:** Write a test specifically for the public `GET /api/v1/reports/[id]` endpoint. Create a report, then call the endpoint. Assert that the response status is `200` and that the body **only** contains the allowed public fields (`id`, `status`, `updatedAt`) and nothing else.
- **Frontend Integration Test:** Write a test for the `StatusCheckScreen`. Mock the public API. Simulate a user entering an ID and pressing the button. Verify that the correct service function is called and that the returned status is displayed correctly. Also test the flow for a `404` error from the API.

## Change Log
| Date | Version | Description | Author |
| :--- | :--- | :--- | :--- |
| 2025-10-18 | 1.0 | Initial draft of the story. | Sarah (PO) |
