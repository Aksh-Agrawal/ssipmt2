# <!-- Powered by BMADâ„¢ Core -->
# Story 1.4: Voice-to-Text Report Submission UI

## Status
Draft

## Story
**As a** citizen,
**I want** a "Tap and Speak" button to easily describe my civic issue,
**so that** I can report problems without needing to type.

## Acceptance Criteria
1. The report submission screen has a prominent record button.
2. Pressing the record button initiates a voice recording session.
3. Releasing the button stops the recording and triggers transcription.
4. The transcribed text is displayed in a text input field on the screen.
5. The user must be prompted for microphone permissions if not already granted.

## Tasks / Subtasks
- [ ] Enhance the `ReportSubmissionScreen.tsx` component. (AC: #1)
- [ ] Add a large, centrally-located record `Button` or `IconButton`. (AC: #1)
- [ ] Add a multiline `TextInput` from `react-native-paper` to display the transcription. (AC: #4)
- [ ] Research and integrate a suitable voice-to-text library (e.g., `react-native-voice`).
- [ ] Implement logic to request microphone permissions on Android and iOS. (AC: #5)
- [ ] Implement the `onPressIn` and `onPressOut` events on the record button to start and stop the voice recognition service. (AC: #2, #3)
- [ ] Create a state variable to hold the transcribed text and bind it to the `TextInput`. (AC: #4)
- [ ] Update the state with the result from the voice-to-text library when transcription is complete. (AC: #4)

## Dev Notes
This story is a core part of the "Simplicity and Trust" UX vision. The interaction should be intuitive and require no instruction.

- **Key Interaction:** The user presses and holds the button to speak. The transcription appears when they release it.
- **Voice Recognition Library:** The choice of library is a key technical decision for this story. It must support continuous dictation and work reliably on both iOS and Android. `react-native-voice` is a potential candidate.
- **Permissions:** The app's `Info.plist` (iOS) and `AndroidManifest.xml` (Android) will need to be updated with descriptions for microphone usage.
- **UI:** The button should provide visual feedback to indicate that it is actively listening (e.g., changing color or displaying an icon).

### Testing
- **Unit Test:** The `ReportSubmissionScreen` should be tested to ensure it renders the button and text input. Check that the initial state of the text input is empty.
- **Integration Test:** Mock the chosen voice-to-text library. Write a test to simulate the `onPressIn` and `onPressOut` events. Verify that the mock library's start/stop functions are called and that the mock transcription result is correctly displayed in the `TextInput`.

## Change Log
| Date | Version | Description | Author |
| :--- | :--- | :--- | :--- |
| 2025-10-18 | 1.0 | Initial draft of the story. | Sarah (PO) |
