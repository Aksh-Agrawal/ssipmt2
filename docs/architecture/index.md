# AI-Powered Civic Voice Assistant Fullstack Architecture Document

## Table of Contents

- [AI-Powered Civic Voice Assistant Fullstack Architecture Document](#table-of-contents)
  - [1. Introduction](./1-introduction.md)
    - [1.1. Starter Template or Existing Project](./1-introduction.md#11-starter-template-or-existing-project)
    - [1.2. Change Log](./1-introduction.md#12-change-log)
  - [2. High Level Architecture](./2-high-level-architecture.md)
    - [2.1. Technical Summary](./2-high-level-architecture.md#21-technical-summary)
    - [2.2. Platform and Infrastructure Choice](./2-high-level-architecture.md#22-platform-and-infrastructure-choice)
    - [2.3. Repository Structure](./2-high-level-architecture.md#23-repository-structure)
    - [2.4. High Level Architecture Diagram](./2-high-level-architecture.md#24-high-level-architecture-diagram)
    - [2.5. Architectural Patterns](./2-high-level-architecture.md#25-architectural-patterns)
  - [3. Tech Stack](./3-tech-stack.md)
    - [3.1. Technology Stack Table](./3-tech-stack.md#31-technology-stack-table)
  - [4. Data Models](./4-data-models.md)
    - [4.1. Report](./4-data-models.md#41-report)
    - [4.2. AdminUser](./4-data-models.md#42-adminuser)
    - [4.3. KnowledgeArticle](./4-data-models.md#43-knowledgearticle)
  - [5. API Specification](./5-api-specification.md)
    - [5.1. REST API Specification (OpenAPI 3.0)](./5-api-specification.md#51-rest-api-specification-openapi-30)
  - [6. Components](./6-components.md)
    - [6.1. Component List](./6-components.md#61-component-list)
      - [Mobile App](./6-components.md#mobile-app)
      - [Admin Web App](./6-components.md#admin-web-app)
      - [API Gateway](./6-components.md#api-gateway)
      - [Reporting Service](./6-components.md#reporting-service)
      - [Agent Service](./6-components.md#agent-service)
      - [Admin Service](./6-components.md#admin-service)
    - [6.2. Component Diagram](./6-components.md#62-component-diagram)
  - [7. External APIs](./7-external-apis.md)
    - [7.1. NLP Service (Google Cloud Natural Language)](./7-external-apis.md#71-nlp-service-google-cloud-natural-language)
    - [7.2. Traffic API (Google Maps Routes API)](./7-external-apis.md#72-traffic-api-google-maps-routes-api)
  - [8. Core Workflows](./8-core-workflows.md)
    - [8.1. Workflow 1: New Issue Submission](./8-core-workflows.md#81-workflow-1-new-issue-submission)
    - [8.2. Workflow 2: Agent Traffic Query](./8-core-workflows.md#82-workflow-2-agent-traffic-query)
  - [9. Database Schema](./9-database-schema.md)
    - [9.1. Complaints DB (PostgreSQL)](./9-database-schema.md#91-complaints-db-postgresql)
    - [9.2. Live DB (Redis)](./9-database-schema.md#92-live-db-redis)
  - [10. Frontend Architecture](./10-frontend-architecture.md)
    - [10.1. Component Architecture](./10-frontend-architecture.md#101-component-architecture)
      - [Component Organization](./10-frontend-architecture.md#component-organization)
      - [Component Template](./10-frontend-architecture.md#component-template)
    - [10.2. State Management Architecture](./10-frontend-architecture.md#102-state-management-architecture)
      - [State Structure (Zustand)](./10-frontend-architecture.md#state-structure-zustand)
      - [State Management Patterns](./10-frontend-architecture.md#state-management-patterns)
    - [10.3. Routing Architecture](./10-frontend-architecture.md#103-routing-architecture)
      - [Route Organization](./10-frontend-architecture.md#route-organization)
      - [Protected Route Pattern](./10-frontend-architecture.md#protected-route-pattern)
    - [10.4. Frontend Services Layer](./10-frontend-architecture.md#104-frontend-services-layer)
      - [API Client Setup](./10-frontend-architecture.md#api-client-setup)
      - [Service Example](./10-frontend-architecture.md#service-example)
  - [11. Backend Architecture](./11-backend-architecture.md)
    - [11.1. Service Architecture (Serverless)](./11-backend-architecture.md#111-service-architecture-serverless)
      - [Function Organization (Vercel API Routes)](./11-backend-architecture.md#function-organization-vercel-api-routes)
      - [Function Template (Hono on Vercel)](./11-backend-architecture.md#function-template-hono-on-vercel)
    - [11.2. Database Architecture](./11-backend-architecture.md#112-database-architecture)
      - [Schema Design](./11-backend-architecture.md#schema-design)
      - [Data Access Layer (Repository Pattern)](./11-backend-architecture.md#data-access-layer-repository-pattern)
    - [11.3. Authentication and Authorization](./11-backend-architecture.md#113-authentication-and-authorization)
      - [Auth Flow (JWT Validation)](./11-backend-architecture.md#auth-flow-jwt-validation)
      - [Middleware for Authorization (Hono)](./11-backend-architecture.md#middleware-for-authorization-hono)
  - [12. Unified Project Structure](./12-unified-project-structure.md)
  - [13. Development Workflow](./13-development-workflow.md)
    - [13.1. Local Development Setup](./13-development-workflow.md#131-local-development-setup)
      - [Prerequisites](./13-development-workflow.md#prerequisites)
      - [Initial Setup](./13-development-workflow.md#initial-setup)
      - [Development Commands](./13-development-workflow.md#development-commands)
    - [13.2. Environment Configuration](./13-development-workflow.md#132-environment-configuration)
      - [Required Environment Variables](./13-development-workflow.md#required-environment-variables)
  - [14. Deployment Architecture](./14-deployment-architecture.md)
    - [14.1. Deployment Strategy](./14-deployment-architecture.md#141-deployment-strategy)
    - [14.2. CI/CD Pipeline (GitHub Actions)](./14-deployment-architecture.md#142-cicd-pipeline-github-actions)
    - [14.3. Environments](./14-deployment-architecture.md#143-environments)
  - [15. Security and Performance](./15-security-and-performance.md)
    - [15.1. Security Requirements](./15-security-and-performance.md#151-security-requirements)
    - [15.2. Performance Optimization](./15-security-and-performance.md#152-performance-optimization)
  - [16. Testing Strategy](./16-testing-strategy.md)
    - [16.1. Testing Pyramid](./16-testing-strategy.md#161-testing-pyramid)
    - [16.2. Test Organization](./16-testing-strategy.md#162-test-organization)
      - [Frontend Tests (, )](./16-testing-strategy.md#frontend-tests)
      - [Backend Tests (, )](./16-testing-strategy.md#backend-tests)
      - [E2E Tests](./16-testing-strategy.md#e2e-tests)
    - [16.3. Test Examples](./16-testing-strategy.md#163-test-examples)
      - [Frontend Component Test (React Native Testing Library)](./16-testing-strategy.md#frontend-component-test-react-native-testing-library)
      - [Backend API Test (Supertest)](./16-testing-strategy.md#backend-api-test-supertest)
      - [E2E Test (Maestro)](./16-testing-strategy.md#e2e-test-maestro)
  - [17. Coding Standards](./17-coding-standards.md)
    - [17.1. Critical Fullstack Rules](./17-coding-standards.md#171-critical-fullstack-rules)
    - [17.2. Naming Conventions](./17-coding-standards.md#172-naming-conventions)
  - [18. Error Handling Strategy](./18-error-handling-strategy.md)
    - [18.1. Error Flow](./18-error-handling-strategy.md#181-error-flow)
    - [18.2. Error Response Format](./18-error-handling-strategy.md#182-error-response-format)
    - [18.3. Frontend Error Handling](./18-error-handling-strategy.md#183-frontend-error-handling)
    - [18.4. Backend Error Handling](./18-error-handling-strategy.md#184-backend-error-handling)
  - [19. Monitoring and Observability](./19-monitoring-and-observability.md)
    - [19.1. Monitoring Stack](./19-monitoring-and-observability.md#191-monitoring-stack)
    - [19.2. Key Metrics](./19-monitoring-and-observability.md#192-key-metrics)
  - [20. Checklist Results Report](./20-checklist-results-report.md)
    - [Executive Summary](./20-checklist-results-report.md#executive-summary)
    - [Section Analysis](./20-checklist-results-report.md#section-analysis)
    - [Risk Assessment](./20-checklist-results-report.md#risk-assessment)
    - [Recommendations](./20-checklist-results-report.md#recommendations)
    - [AI Implementation Readiness](./20-checklist-results-report.md#ai-implementation-readiness)
    - [Frontend-Specific Assessment](./20-checklist-results-report.md#frontend-specific-assessment)
